{{template "base" .}}
{{define "content"}}
<section id="dashboard-page" aria-labelledby="dashboard-title">
<h1 id="dashboard-title">Dashboard</h1>

{{if .Error}}
<div class="alert alert-error" role="alert" id="dashboard-error">{{.Error}}</div>
{{else}}
<div class="grid" id="status-panel">
    <article class="card" id="node-status-card">
        <h3>Node Status</h3>
        <div class="status-item">
            <span class="label">State:</span>
            <span class="value status-indicator status-{{.Status.State}}">{{.Status.State}}</span>
        </div>
        <div class="status-item">
            <span class="label">Name:</span>
            <span class="value">{{.Status.NodeName}}</span>
        </div>
        <div class="status-item">
            <span class="label">Node ID:</span>
            <span class="value mono" id="node-id-display">{{truncate .Status.NodeID 24}}</span>
        </div>
        <div class="status-item">
            <span class="label">Uptime:</span>
            <span class="value" id="uptime-display">{{.Status.Uptime}}</span>
        </div>
        <div class="status-item">
            <span class="label">Version:</span>
            <span class="value">{{.Status.Version}}</span>
        </div>
    </article>

    <article class="card" id="network-card">
        <h3>Network</h3>
        <div class="status-item">
            <span class="label">Tunnel IP:</span>
            <span class="value mono" id="tunnel-ip-display">{{if .Status.TunnelIP}}{{.Status.TunnelIP}}{{else}}<em>Not set</em>{{end}}</span>
        </div>
        <div class="status-item">
            <span class="label">I2P Dest:</span>
            <span class="value mono" id="i2p-dest-display">{{if .Status.I2PDestination}}{{truncate .Status.I2PDestination 32}}{{else}}<em>Not set</em>{{end}}</span>
        </div>
    </article>

    <article class="card stats-card" id="stats-card">
        <div class="stat">
            <span class="stat-value" id="peer-count">{{.PeerCount}}</span>
            <span class="stat-label">Peers</span>
        </div>
        <div class="stat">
            <span class="stat-value" id="route-count">{{.RouteCount}}</span>
            <span class="stat-label">Routes</span>
        </div>
    </article>
</div>

<div class="actions" id="dashboard-actions">
    <button type="button" class="btn btn-primary" id="refresh-status-btn" onclick="refreshStatus()">Refresh</button>
</div>
{{end}}
</section>
{{end}}
